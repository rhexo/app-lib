\du
\q
create database sandbox;
\?
\db
\dt
\?
\l
\l+
\q
\dt
\q
create database websnap owner dbadmin;
\l
\?
connect websnap
;
\connect websnap;
create table t_conf {}
;
create table t_conf(
prop_name  char(12),
prop_value char(128),
constraint t_conf_pk_k1 primary key(prop_name));
\dt
\?
\d t_conf
create table t_entry (
\q
\connect websnap
\l
\dt
create type web_tys (
;
;
\?
\r
create type web_tys as (
addr text,
descr text,
counter integer,
delay integer );
create table t_entry (
webid numeric(32),
web web_tys,
constraint t_entry_pk_k1 primary key(webid));
\dt
\dt t_entry
\?
\?
\dS+ t_entry
\d t_entry
\d web_tys
\q
\l
\d
\dt t_entry
\d t_entry
\d web_tys
create type snap_tys (
datetime timestamp,
descr char(128),
deleted boolean,
data xml,
\r
create type snap_tys (
datetime timestamp,
descr char(128),
deleted boolean);
create type snap_tys (
snap_dt timestamp,
descr char(128),
deleted boolean);
create type snap_tys as (
snap_dt timestamp,
descr char(128),
deleted boolean);
\d snap_tys
create table t_snap (
webid numeric(32),
snapid numeric(32),
snap snap_tys,
constraint t_snap_pk_k1 primary key (webid,snapid),
constraint t_snap_fk_k1 foreign key (webid) references t_entry(webid));
\d t_snap
alter type snap_tys add attribute data xml cascade;
\d t_snap
\d snap tys
\d snap_tys
\q
alter type web_tys add attribute deleted boolean cascade;
\d web_tys
\q
/t
\t
\?
\d
\dS
\dS
\?
\dt
cls
clear
\dt t_snap
\d t_snap
\h
\?
\dt+ t_snap
\df t_snap
\s t_snap
